# Разработка на десктопе (Web версия)

## Зачем нужна веб-версия?

Expo поддерживает запуск приложения в браузере. Это полезно для:
- ✅ **Быстрой разработки UI** — не нужно перезапускать на телефоне
- ✅ **Проверки компонентов** — быстрее, чем на устройстве
- ✅ **Демонстрации** — можно показать прототип без телефона
- ⚠️ **Ограничения**: камера и геолокация не работают в браузере

## Запуск

```bash
npm run web
```

Откроется в браузере по адресу `http://localhost:8081`

## Что работает на веб

✅ **UI компоненты** — все визуальные элементы
✅ **Навигация** — переключение между экранами
✅ **Стили** — весь дизайн
✅ **Zustand stores** — управление состоянием
✅ **Firebase** — авторизация, Firestore, Storage
✅ **Коллекция** — просмотр элементов
✅ **Профиль** — статистика, уровни
✅ **Конструктор** — создание фасадов (частично)

## Что НЕ работает на веб

❌ **Камера** — `expo-camera` не поддерживается в браузере
❌ **Геолокация** — `expo-location` не работает
❌ **Карта** — `react-native-maps` не рендерится

## Workflow для разработки

### Вариант 1: UI → iPhone

1. Разрабатываешь UI на десктопе (`npm run web`)
2. Быстро итерируешься, видишь изменения
3. Проверяешь функциональность на iPhone (`npm start` + Expo Go)

### Вариант 2: Компоненты по отдельности

1. Создаёшь компонент на веб
2. Тестируешь разные состояния (loading, error, success)
3. Проверяешь на реальном устройстве

## Обход ограничений

### Мок-данные для камеры

Вместо реальной камеры можно использовать фейковые фото:

```typescript
// app/(tabs)/camera.tsx

if (Platform.OS === 'web') {
  // Фейковое фото для теста
  const mockPhoto = 'https://via.placeholder.com/300x300?text=Test+Photo';
  setPhoto(mockPhoto);
  return;
}

// Реальная камера на мобильном
const photo = await cameraRef.current.takePictureAsync();
```

### Мок-данные для геолокации

```typescript
// app/(tabs)/map.tsx

if (Platform.OS === 'web') {
  // Фейковая геолокация (центр Москвы)
  setUserLocation({
    latitude: 55.7612,
    longitude: 37.6089
  });
  return;
}

// Реальная геолокация
const location = await getCurrentLocation();
```

### Показать карту статичным изображением

```typescript
// app/(tabs)/map.tsx

if (Platform.OS === 'web') {
  return (
    <View style={styles.container}>
      <Image
        source={{ uri: 'https://static-map-url.com' }}
        style={styles.map}
      />
      <Text>Карта доступна только на мобильных устройствах</Text>
    </View>
  );
}

// Реальная карта
return <MapView ... />;
```

## Полезные команды

```bash
# Запуск веб-версии
npm run web

# Очистка кэша перед запуском
npx expo start --clear --web

# Только веб, без QR-кода
npx expo start --web
```

## Горячие клавиши

В терминале после `npm start`:
- `w` — открыть веб-версию
- `i` — открыть iOS симулятор
- `a` — открыть Android эмулятор
- `r` — перезагрузить приложение
- `m` — переключить меню

## Отладка

### React DevTools

```bash
npm install -g react-devtools
react-devtools
```

Откроет окно DevTools, подключится к приложению.

### Redux DevTools (для Zustand)

Можно подключить Redux DevTools к Zustand:

```typescript
import { devtools } from 'zustand/middleware';

export const useUserStore = create(
  devtools(
    (set) => ({
      // ...
    }),
    { name: 'UserStore' }
  )
);
```

## Производительность

Веб-версия быстрее для:
- Проверки стилей
- Изменения текстов
- Тестирования логики

Но медленнее для:
- Реальной проверки UX (тач, свайпы)
- Тестирования производительности

## Рекомендации

1. **Разрабатывай UI на веб** — быстро и удобно
2. **Проверяй функциональность на iPhone** — реальный опыт
3. **Используй мок-данные** — для быстрой итерации
4. **Тестируй критичные флоу на девайсе** — камера, карта, геолокация

## Известные проблемы

### react-native-maps на веб

Не работает. Альтернативы:
- Показать статичное изображение
- Использовать Google Maps Embed API
- Условный рендеринг (`Platform.OS === 'web'`)

### expo-camera на веб

Не работает. Альтернативы:
- `<input type="file" accept="image/*" />` — выбор файла
- Показать placeholder "Камера доступна только на мобильных"

### Жесты (gesture-handler)

Частично работают. Проверяй на реальном устройстве.

## Итого

Веб-версия — это **инструмент для разработки**, а не полноценная платформа.

**Используй для:**
- ✅ Быстрой итерации UI
- ✅ Проверки компонентов
- ✅ Демонстрации прототипа

**Не используй для:**
- ❌ Тестирования камеры
- ❌ Тестирования карты
- ❌ Финальной проверки UX

---

**Главное правило**: разрабатывай на веб, проверяй на iPhone.

